# 13.3.8. Script-Fu ë””ë²„ê¹…í•˜ê¸°(Debugging Script-Fu)
Script-Fu API í•¨ìˆ˜ì¸ `gimp-message`ì„ ì´ìš©í•œ ë””ë²„ê¹… ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.

ë””ë²„ê¹… êµ¬ë¬¸ì€ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ìê°€ ìŠ¤í¬ë¦½íŠ¸ê°€ ì˜ˆìƒí•œ ëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ”ë° í•„ìš”í•©ë‹ˆë‹¤. ì´ ë””ë²„ê¹… êµ¬ë¬¸ë“¤ì€ ë‚˜ì¤‘ì— ë³¸ì¸ì„ í¬í•¨í•œ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ìë“¤ì„ ìœ„í•´ì„œë„ ìµœì¢… ìŠ¤í¬ë¦½íŠ¸ ê²°ê³¼ë¬¼ì— ìœ ì§€í•´ë‘ë©´ ìœ ìš©í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ, ì‘ì—…í•˜ëŠ” ë„ì¤‘ì— ì´ ëª¨ë“  ë””ë²„ê¹… ë©”ì‹œì§€ë¥¼ ë³´ê²Œ ëœë‹¤ë©´ ë§¤ìš° ë²ˆê±°ë¡œìš¸ ê²ƒì…ë‹ˆë‹¤. ë„ì›€ì´ ë˜ëŠ” ë””ë²„ê¹… ë©”ì‹œì§€ë“¤ì„ ì¢€ ë” ì‰½ê²Œ ì œì–´í•˜ë ¤ë©´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì–´ë–»ê²Œ ìˆ˜ì •í•´ì•¼ í• ê¹Œìš”?

## 1. ì¡°ê±´ë¶€ë¡œ ë””ë²„ê¹… ë©”ì‹œì§€ ì¶œë ¥í•˜ê¸°
`Script-Fu`ì—ì„œ í•¨ìˆ˜(Function)ë¥¼ ì‚¬ìš©í•´ì„œ [ì „ì—­ ë³€ìˆ˜](https://ko.wikipedia.org/wiki/%EC%A0%84%EC%97%AD_%EB%B3%80%EC%88%98)ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ì—­ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ë©´ ìŠ¤í¬ë¦½íŠ¸ ì•ˆì˜ ëª¨ë“  í•¨ìˆ˜ì—ì„œ ì „ì—­ ë³€ìˆ˜ì˜ ê°’ì„ ì½ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ì—­ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ íŠ¹ì •í•œ ë””ë²„ê¹… ë©”ì‹œì§€ë¥¼ ì¶œë ¥í• ì§€ ë§ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```scheme
; ì „ì—­ë³€ìˆ˜ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.
; ì—¬ê¸°ì„œ debugì˜ ê°’ì€ true(#t)ì…ë‹ˆë‹¤. 
; ê°’ì„ false(#f)ë¡œ ë°”ê¿€ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(define debug #t)
```

> ğŸ—’ï¸ ì°¸ê³ 
>
> `Scheme`ì—ì„œ `True`, `False`ì˜ `Boolean` ê°’ì€ ê°ê° `#t`, `#f`ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. [ê´€ë ¨ ì •ë³´: 1.2.5 True and False](https://www.gnu.org/software/mit-scheme/documentation/stable/mit-scheme-ref/True-and-False.html)

ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìœ„ ì½”ë“œì²˜ëŸ¼ ì „ì—­ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ê³ , "if true" í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ ì¶œë ¥ ì—¬ë¶€ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```scheme
; ì „ì—­ë³€ìˆ˜ debugê°€ trueì¼ ê²½ìš°ì—ë§Œ ì•„ë˜ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
(if debug (gimp-message "This is a debug flag controlled message"))
```

## 2. ë””ë²„ê¹… ë©”ì‹œì§€ë¥¼ ì´ìš©í•œ ì´ì§„ ê²€ìƒ‰ìœ¼ë¡œ ì—ëŸ¬ ì°¾ê¸°
ì—ëŸ¬ë¥¼ ì°¾ì•„ë‚´ëŠ” ë˜ë‹¤ë¥¸ ìœ ìš©í•œ ë°©ë²•ì€ ë©”ì‹œì§€ êµ¬ë¬¸ìœ¼ë¡œ [ì´ì§„ ê²€ìƒ‰](https://namu.wiki/w/%EC%9D%B4%EC%A7%84%20%ED%83%90%EC%83%89)ì„ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ì§„ ê²€ìƒ‰ì€ ê²€ìƒ‰ì˜ ë²”ìœ„ë¥¼ ê²€ìƒ‰ ë‹¨ê³„ë§ˆë‹¤ ì ˆë°˜ìœ¼ë¡œ ì¤„ì—¬ê°€ë©° ì›í•˜ëŠ” ê°’ì„ ì°¾ëŠ” ê³¼ì •ì„ ë§í•©ë‹ˆë‹¤.

ì•„ë˜ í”„ë¡œì‹œì €ëŠ” ì´ì§„ ê²€ìƒ‰ì„ ë„ì™€ì£¼ëŠ” ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

```scheme
(define (here x)(gimp-message(string-append " >>> " (number->string x) " <<<")))
```

ìŠ¤í¬ë¦½íŠ¸ì—ì„œ `here 1`ì´ë¼ê³  ì“´ë‹¤ë©´, ìœ„ì˜ í”„ë¡œì‹œì €(`here`)ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ì–´ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

```
>>> 1 <<<
```

ì—ëŸ¬ê°€ ë°œìƒí•œ ë’¤ì˜ ë©”ì‹œì§€ëŠ” ì¶œë ¥ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ë©”ì‹œì§€ì˜ ìœ„ì¹˜ë¥¼ í™•ì¸í•´ì„œ ë¬¸ì œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 3. ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ì½”ë“œ ì‹¤í–‰ ë©ˆì¶”ê¸°
ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë©ˆì¶°ì•¼ í•  ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤. `quit` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ê°•ì œë¡œ ìŠ¤í¬ë¦½íŠ¸ì˜ ì‹¤í–‰ì„ ë©ˆì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```scheme
(define (err msg)(gimp-message(string-append " >>> " msg " <<<"))(quit))
```

ìŠ¤í¬ë¦½íŠ¸ì—ì„œ `err "ë¡œì§ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤"`ë¼ê³  ì“´ë‹¤ë©´, ìœ„ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ì–´ ì•„ë˜ì™€ ê°™ì€ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤.

```scheme
 >>> ë¡œì§ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤ <<<
```

## 4. ë””ë²„ê¹… ë©”ì‹œì§€ ì¶œë ¥ìˆ˜ë‹¨ ì •í•˜ê¸°
[15.5.4. ì˜¤ë¥˜ ì½˜ì†”](./15-05-04-error-console.md)ë¡œ ë””ë²„ê¹… ë©”ì‹œì§€ë¥¼ í™•ì¸í•  ìˆ˜ë„ ìˆì§€ë§Œ, í„°ë¯¸ë„ë¡œë„ ë””ë²„ê¹… ë©”ì‹œì§€ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‹¤ë§Œ ì´ ê²½ìš°ì—ëŠ” í„°ë¯¸ë„ì—ì„œ GIMP(ê¹€í”„)ë¥¼ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

`gimp-message-set-handler` í”„ë¡œì‹œì €ë¥¼ ì‚¬ìš©í•˜ì—¬ ë””ë²„ê¹… ë©”ì‹œì§€ ì¶œë ¥ ì¥ì¹˜ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 0ë²ˆì€ [ìƒíƒœ í‘œì‹œ ì˜ì—­(Status Area)](./03-02-04-09-status-area.md), 1ë²ˆì€ ì½˜ì†”(í„°ë¯¸ë„), 2ë²ˆì€ [ì˜¤ë¥˜ ì½˜ì†”(Error Console)](./15-05-04-error-console.md)ì…ë‹ˆë‹¤. ì•„ë˜ ì˜ˆì‹œì½”ë“œëŠ” ì½˜ì†”(í„°ë¯¸ë„) ì¶œë ¥ìœ¼ë¡œ ì„¤ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤.

```scheme
(gimp-message-set-handler 1)
```

<a id="90-04-27-a11"></a>

#### [ê·¸ë¦¼ 90.4.27.a11. ì˜¤ë¥˜ ì½˜ì†” ëŒ€í™”ìƒìì˜ ë©”ì‹œì§€ ì¶œë ¥ ëª¨ìŠµ](./90-04-0027-error_console.md#90-04-27-a11)
![90-04-27-a11](https://github.com/wonder13662/gimp/assets/15767104/0832a315-4a10-4414-97ca-57e94f997c52)

#### ê·¸ë¦¼ 13.3.8.a12. í„°ë¯¸ë„ì˜ ë©”ì‹œì§€ ì¶œë ¥ ëª¨ìŠµ
![13-03-08-a12(50%)](https://github.com/wonder13662/gimp/assets/15767104/6c38292b-b413-4f15-8509-8c14068d2477)

<a id="90-05-09-a121"></a>

#### [ê·¸ë¦¼ 90.5.9.a121. `ìƒíƒœ í‘œì‹œ ì˜ì—­(Status Area)`ì˜ ë©”ì‹œì§€ ì¶œë ¥ ëª¨ìŠµ](./90-05-09-status_area.md#90-05-09-a121)
![90-05-09-a121](https://github.com/wonder13662/gimp/assets/15767104/0ea14a53-c8c4-4e3a-b03c-fb753a5e0b6b)

## 5. ì˜ˆì‹œ ì½”ë“œ
ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•œ ë’¤ì—, [ì´ë¯¸ì§€ ë©”ë‰´ ë°”](./03-02-04-02-image-menu.md)ì˜ `í•„í„°` â†’ `Script-Fu` â†’ `ìŠ¤í¬ë¦½íŠ¸ ìƒˆë¡œ ê³ ì¹¨` ë©”ë‰´ë¥¼ í´ë¦­í•´ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì½ì–´ë“¤ì…ë‹ˆë‹¤. [ì´ë¯¸ì§€ ë©”ë‰´ ë°”](./03-02-04-02-image-menu.md)ì˜ `Fu-Plugin` â†’ `ë””ë²„ê¹… ì˜ˆì œ` ë©”ë‰´ë¥¼ ì„ íƒí•˜ì—¬, ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### íŒŒì¼ 13.3.8.a1. debug.scm
[debug.scm.zip](https://github.com/wonder13662/gimp/files/15142046/debug.scm.zip)

```scheme
(define (script-fu-debug-examples)
  (let*
    (
      (msg "")(i 0)
    )

    (here 1)

    (if debug (gimp-message " ë””ë²„ê¹…(Debugging) ë©”ì‹œì§€ì…ë‹ˆë‹¤ "))
    (if info (gimp-message " ì •ë³´(Info) ë©”ì‹œì§€ì…ë‹ˆë‹¤ "))

    (if info
      (gimp-message
        " ì—ëŸ¬ ë©”ì‹œì§€ëŠ” ë³´í†µì€ ë…ì— ìˆëŠ” ì˜¤ë¥˜ ì½˜ì†”ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤ "
      )
    )

    (here 2)

    (if info
      (gimp-message
        " ì•ˆíƒ€ê¹ê²Œë„ ëª¨ë“  ë©”ì‹œì§€ëŠ” ê²½ê³  ì ‘ë¯¸ì‚¬ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤ "
      )
    )

    (if info
      (gimp-message
        (string-append
        " (gimp-message-set-handler 1) í”„ë¡œì‹œì €ëŠ” ëª¨ë“  ë””ë²„ê¹… ë©”ì‹œì§€ë¥¼ í„°ë¯¸ë„ë¡œ ë³´ëƒ…ë‹ˆë‹¤ "
        " í„°ë¯¸ë„ì„ ì„ íƒí•´ì„œ ìµœìƒìœ„ë¡œ ë‘ì–´ì•¼ ë©”ì‹œì§€ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤ "
        )
      )
    )

    (here 3)

    (gimp-message-set-handler 1)

    (if info (gimp-message " ì´ ë©”ì‹œì§€ëŠ” í„°ë¯¸ë„ë¡œ ë³´ë‚´ì§‘ë‹ˆë‹¤"))

    (here 4)

    (gimp-message-set-handler 2)

    (if info
      (gimp-message
        " (gimp-message-set-handler 2) í”„ë¡œì‹œì €ëŠ” ëª¨ë“  ë””ë²„ê¹… ë©”ì‹œì§€ë¥¼ ì˜¤ë¥˜ ì½˜ì†”ë¡œ ë³´ëƒ…ë‹ˆë‹¤ "
      )
    )

    (if info (gimp-message " ì´ ë©”ì‹œì§€ëŠ” ì˜¤ë¥˜ ì½˜ì†”ë¡œ ë³´ë‚´ì§‘ë‹ˆë‹¤"))

    (if info
      (gimp-message
        " ì˜¤ë¥˜ ì½˜ì†”ì´ ë‹«í˜€ìˆìœ¼ë©´, ì—ëŸ¬ ë©”ì‹œì§€ëŠ” ìƒíƒœ í‘œì‹œ ì˜ì—­ìœ¼ë¡œ ë³´ë‚´ì§‘ë‹ˆë‹¤ "        
      )
    )

    (if info
      (gimp-message
        " (gimp-message-set-handler 0) í”„ë¡œì‹œì €ëŠ” ëª¨ë“  ë””ë²„ê¹… ë©”ì‹œì§€ë¥¼ ìƒíƒœ í‘œì‹œ ì˜ì—­ìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤ "
      )
    )

    (gimp-message-set-handler 0)

     (if info (gimp-message " ì´ ë©”ì‹œì§€ëŠ” ìƒíƒœ í‘œì‹œ ì˜ì—­ìœ¼ë¡œ ë³´ë‚´ì§‘ë‹ˆë‹¤ "))

    (if info
      (gimp-message
         (string-append
           " ìƒíƒœ í‘œì‹œ ì˜ì—­ì˜ ë©”ì‹œì§€ê°€ ë„ˆë¬´ ê¸¸ì–´ì„œ ì¤„ë°”ê¿ˆì´ ë°œìƒí•˜ë©´, íŒì—… ê²½ê³ ì°½ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤ "
         )         
      )
    )

    (gimp-message-set-handler 2)

    (if info
      (gimp-message
        (string-append
        " ë£¨í”„ ì•ˆì—ì„œ ë””ë²„ê¹… ë©”ì‹œì§€ë¥¼ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´, "
        " ë§¤ìš° ë§ì€ ê²½ê³ ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ "
        )        
      )
    )

    (here 5.1)

    (while (< i 10)
      (set! info (number->string i))
      (set! msg (string-append msg " ë£¨í”„ì—ì„œì˜ ì •ë³´ì…ë‹ˆë‹¤ : " info "\n"))
      (set! i (+ i 1))
    )

    (if info (gimp-message msg))

    (if info
      (gimp-message
        (string-append
        " ì¡°ê±´ì´ ë§ìœ¼ë©´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¤‘ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ "
        " (err msg) í”„ë¡œì‹œì €ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¤‘ë‹¨ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤ "
        )
      )
    )

    (if (not falseFlag) (err " ë¡œì§ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤ "))

    (here 5.2)
  )
)


; ì „ì—­ë³€ìˆ˜ ë° ì „ì—­í•¨ìˆ˜ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.
; debug and error macro
(define (err msg)(gimp-message(string-append " >>> " msg " <<<"))(quit))
(define (here x)(gimp-message(string-append " >>> " (number->string x) " <<<")))
; ë©”ì‹œì§€ í‘œì‹œ ë“±ê¸‰: debugëŠ” ëª¨ë“  ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
; debugì˜ ê°’ì€ true(#t)ì…ë‹ˆë‹¤. 
; ê°’ì„ false(#f)ë¡œ ë°”ê¿€ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(define debug #t)
; ë©”ì‹œì§€ í‘œì‹œ ë“±ê¸‰: infoëŠ” ì •ë³´ë§Œì„ í‘œì‹œí•©ë‹ˆë‹¤.
(define info #t)
; ì—ëŸ¬ ë©”ì‹œì§€ ì˜ˆì œ
(define falseFlag  #f)

(script-fu-register "script-fu-debug-examples"
 "ë””ë²„ê¹… ì˜ˆì œ"
 "Script-Fuì—ì„œ ë””ë²„ê¹… í•˜ê¸°"
 "Mark Sweeney"
 "copyright 2023, Mark Sweeney, Under GNU GENERAL PUBLIC LICENSE Version 3"
 "2023"
 ""
)
(script-fu-menu-register "script-fu-debug-examples" "<Image>/Fu-Plugin")
```

***

## ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ê°€ê¸°

[â¡ï¸ ë‹¤ìŒ: 13.4. ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì œ](./13-04-00-script_examples.md)

[â¬…ï¸ ì´ì „: 13.3.7. ìµœì¢… ìŠ¤í¬ë¦½íŠ¸ ê²°ê³¼ í™•ì¸í•˜ê¸°(Your script and its working)](./13-03-07-your-script-and-its-working.md)

[â¬†ï¸ ìœ„: 13.3. Script-Fu íŠœí† ë¦¬ì–¼(A Script-Fu tutorial)](./13-03-00-a-script-fu-tutorial.md)

[â¬†ï¸ ìœ„: 13. ìŠ¤í¬ë¦½íŒ…(Scripting)](./13-00-scripting.md)

[ğŸ  í™ˆ](./00-home.md)

[ì›ë¬¸](https://developer.gimp.org/resource/script-fu/debug-script-fu/)